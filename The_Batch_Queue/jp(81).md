<span style="color: #000000; background: none; overflow: hidden; page-break-after: avoid; font-size: 2.0em; font-family: Georgia,Times,serif; margin-top: 1em; margin-bottom: 0.25em; line-height: 1.3; padding: 0; border-bottom: 1px solid #AAAAAA;">バッチ処理
</span>

## イントロダクション

　RawTherapeeでは[画像を保存する](Saving/jp#保存 "wikilink")方法が幾つかあります。最も一般的な方法は2つ、編集タブの![<File:Save.png>](Save.png "File:Save.png")を使って直ぐに現在の画像を保存する方法と、保存準備のために画像をキュータブに送る![<File:Gears.png>](Gears.png "File:Gears.png")方法です。“現在の画像を保存する”を選択すると直ぐにCPUが保存処理を始めますが、処理中は他の画像を開いたり編集したりする動きが多少鈍くなるでしょう。バッチ処理は編集作業を終え、画像を仮想の順番待ち（キュー）に並べ、後で一括保存処理を行う方法です。編集画像をキューに送るのは簡単なので、直ぐに他の編集作業に取り掛かれますし、CPUの能力も殆どそのために使えます。全ての編集作業とキューへの送りが終了したら、キュータブ画面左上の大きな“オン”ボタンを押せば、画像の一括保存処理が始まるので、処理をCPUにまかせコーヒーブレークを取ることも出来るでしょう。

　キューには持続性があるので、プログラムを終了後に再開しても処理待ちの画像はキューに残ります。プログラムがクラッシュしても残っています。

## 画像をキューに追加

　画像をキューに追加する方法は幾つかあります：

1.  編集タブで画像の編集を終えたら、“現在の画像をキューに追加”![<File:Gears.png>](Gears.png "File:Gears.png")のボタンを押す。
2.  または、編集タブの“現在の画像を保存”![<File:Save.png>](Save.png "File:Save.png")ボタンを押し、右の3つの選択肢から、キューの先頭に追加するか、最後に追加するか選ぶ。
3.  [ファイルブラウザタブ](The_File_Browser_Tab/jp "wikilink")或いは[画像スライドでサムネイルを](The_Image_Editor_Tab/jp#画像スライド "wikilink")右クリックし、“キューに追加”を選択。

　どの方法を選択しても、キュータブの中を見れば、貴方が編集を終え保存処理を待つ画像が並んでいます（但し、“自動スタート”が有効になっていると、タブを除いた時は既に保存処理が終わっているかもしれません）。

## キューの設定

<figure>
<img src="Save_window.png" title="Save_window.png" />
<figcaption>Save_window.png</figcaption>
</figure>

　キュータブには、出力ファイルのフォーマットや保存場所を選ぶなど、幾つか設定項目があります。これらの設定は、“現在の画像を保存”![<File:Save.png>](Save.png "File:Save.png")を押し、“キュー処理の先頭/最後に送る”を選択し、“強制保存のオプション”を行わない限り、有効となります。この場合、“保存”のウィンドウに表示されている設定が行われ、キュータブの設定は無視されます。その他の場合は全てキュータブにおける設定が有効となります。

　設定項目はご覧の通りですが、2点だけ明確にしておきます：

1.  “設定値も保存する”を有効にすると、出力ファイルに付随する同じ名前のサイドカーファイル（拡張子pp3）に設定値が保存されます。このことは同じ画像に少しずつ異なる編集を施し、複数の設定値を保存する場合に便利です。
2.  画像の保存先は
    “ファルダ―に保存”で選択できますが、もっと機動的にフォルダーの保存場所やファイル名をカスタマイズしたい場合は“テンプレートを使う”を選択します。マウスを“テンプレートを使う”の入力ボックスの辺りで動かすと、機能説明がポップアップします。

次の書式文字を使用することができます：

<b>%f</b>, <b>%d1</b>, <b>%d2</b>, ..., <b>%p1</b>, <b>%p2</b>, ...,
<b>%r</b>, <b>%s1</b>, <b>%s2</b>, ...

これら書式文字は画像のパス名の個々の部分、或いは画像の属性を参照するためのものです。例えば編集された画像が次のようなパス名を持っている場合：

<b><i>/home/tom/photos/2010-10-31/dsc0042.nef</i></b>

これら書式文字が意味するところは：

<b>`%d4`</b>` = `<i>`home`</i>
<b>`%d3`</b>` = `<i>`tom`</i>
<b>`%d2`</b>` = `<i>`photos`</i>
<b>`%d1`</b>` = `<i>`2010-10-31`</i>
<b>`%f`</b>`  = `<i>`dsc0042`</i>
<b>`%p1`</b>` = `<i>`/home/tom/photos/2010-10-31/`</i>
<b>`%p2`</b>` = `<i>`/home/tom/photos/`</i>
<b>`%p3`</b>` = `<i>`/home/tom/`</i>
<b>`%p4`</b>` = `<i>`/home/`</i>

<b>％r</b>は画像の順位によって置き換えられ、順位がない場合、％rは‘0’で置き換えられ、画像がゴミ箱にある場合は、‘x’で置き換えられます。

<b>%s1、%s2</b>などは1から9
で詰めたシーケンスインデックスで置き換えられます。シーケンスインデックスはキュー処理が始まるごとに開始され、画像が生成されるごとに増えていきます。

編集後の画像を元画像に保存したい場合は：

<b>%p1/%f</b>と入力します。

編集後の画像を元画像のディレクトリーにある‘converted’という名のディレクトリーに保存する場合は:

<b>%p1/converted/%f</b>と入力します。

編集後の画像を‘/home/tom/photos/converted/2010-10-31’という名のディレクトリーに保存する場合は:

<b>%p2/converted/%d1/%f</b>と入力します。

## キューの起動

　キュータブの左上に“オン/オフ”のスイッチと“オートスタート”のチェックボックスがあります。

1.  “オートスタート”に✔を入れると、画像がキューに送られ次第、保存処理が始まる設定になります。しかし、本来他の画像編集のために使いたいCPUの能力が下がってしまいますので、普通はこれを有効にしたいとは思わないでしょう。
2.  “オートスタート”の✔を外すと、保存処理の起動は“オン/オフ”スイッチを使って手動で行います。

　画像の一括保存処理は“オン/オフ”スイッチで中断することも出来ます。オフを押すと、現在の画像の処理が終了次第、保存処理が中断します。

## キューのクリア

　特定の画像をキューから削除したい時は、該当するサムネイルの右上にある削除ボタン![<File:Cancel-small.png>](Cancel-small.png "File:Cancel-small.png")を使います。

　全ての画像をキュータブから削除する場合は、任意のサムネイルを右クリックし“全選択”を選び“ジョブキャンセル”を押すか、キーボードショートカット +
を使って全てのサムネイルを選択し、キーボードショットカットを押します。