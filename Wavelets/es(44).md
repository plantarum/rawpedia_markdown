<div style="background-color: #363636; border-radius: 3px; font-family: serif; color: #dddddd; font-size: 2.8em; line-height: 3.0; padding-left: 2.0em; margin-bottom: 1.5em;">

Ondículas

</div>

## ¿Qué son las Ondículas?


Una [Ondícula](https://es.wikipedia.org/wiki/Ondícula), o más
específicamente una [Transformada de
Ondícula](https://es.wikipedia.org/wiki/Transformada_ondícula), es una
función matemática muy útil en el procesamiento de imágenes, ya que
permite dividirlas en varios niveles de detalle para que puedas trabajar
en el que te interese.


El término técnico de las ondículas fue introducido a principios de los
años 80 por los físicos franceses Jean Morlet y Alex Grossman:
utilizaron la palabra francesa *«ondelette»*, que significa *«onda
pequeña»*. Posteriormente, esta palabra fue adaptada al inglés cambiando
*«onde»* por *«wave»*, quedando *«wavelet»*. En español se emplea una
adaptación que se origina del latín (*«unda»=onda*, *«-ícula»=pequeña*;
y al final, *ondícula*).


La *transformada de ondícula* es bastante similar a una *transformada de
Fourier* : la diferencia principal es que la transformada de ondícula
representa los datos que se están analizando como las frecuencias
presentes en cada momento dado, mientras que la transformada de Fourier
estándar sólo representa las frecuencias presentes en un rango de
tiempo. Por lo tanto, utilizar ondículas ofrece más precisión a la hora
de analizar los datos.  
<span style="font-size: 0.7em; font-style: italic;">\[Obviamente esta es
una explicación muy simplista y resumida: los matemáticos seguro que
tendrían mucho que decir aquí...\]</span>


En RawTherapee se emplean las ondículas en varias herramientas: en ésta
en concreto se usa la ondícula de
[Daubechies](https://en.wikipedia.org/wiki/Daubechies_wavelet)
<span style="font-size: 0.7em; font-style: italic;">(enlace a documento
en inglés)</span>, que aporta buena precisión sin aumentar notablemente
los recursos necesarios de memoria RAM y tiempo de procesador.


En esta herramienta, RawTherapee desglosa los componentes de la imagen
en el [espacio de color
L\*a\*b\*](https://es.wikipedia.org/wiki/Espacio_de_color_Lab) (L\*, a\*
y b\*). El término técnico correcto es «descomponer», pero
intuitivamente se entenderá mejor «desglosar», que es el término que se
usará en adelante.


Este desglose produce dos resultados diferentes:



- Varios niveles de detalle: la elección de cuántos sean depende de tus
  necesidades (el primer nivel corresponde a detalles con un área de 2x2
  píxeles, el décimo nivel corresponde a «detalles» con una área de
  1024x1024 píxeles).



Sin embargo, ten en cuenta que cuantos más niveles, más tiempo de
procesamiento y más memoria hacen falta.

<!-- -->



Por otro lado, como cada nivel contiene sólo «variaciones» (por ejemplo
de contraste), si una imagen es absolutamente uniforme en luminancia y
color, los niveles no contendrán ninguna información.

<!-- -->



Como cada nivel tiene un tipo distinto de detalle (de más fino a más
grosero), podemos realizar ajustes por separado en cada nivel, pero con
algoritmos específicos que tienen en cuenta esta particularidad.



- Una imagen residual: es el resultado de eliminar de la imagen original
  los detalles presentes en todos los niveles, con la particularidad de
  que la modificación de las características (contraste, croma, etc.) de
  un nivel no tiene efecto sobre la imagen residual y viceversa.



Esta imagen residual tiene las mismas características (en cuanto a su
procesado) que la imagen de origen.

Dependiendo de las necesidades, tendrás que trabajar con un nivel de
detalle individual, con varios niveles de detalle (uno tras otro), con
la imagen residual, o con todos éllos combinados. RawTherapee hace que
ésto resulte tremendamente fácil.

En cuanto las distintas modificaciones se han aplicado (en los niveles y
en la imagen residual), los componentes de la imagen se vuelven a unir.



## En la práctica


Tras el desglose se pueden usar los niveles resultantes para distintos
propósitos:

- Compresión de la imagen,

<!-- -->

- Reducción de ruido,

<!-- -->

- [Marcas de agua
  secretas](http://www.intechopen.com/books/discrete-wavelet-transforms-algorithms-and-applications/application-of-discrete-wavelet-transform-in-watermarking)
  <span style="font-size: 0.7em; font-style: italic;">(enlace a
  documento en inglés)</span>,

<!-- -->

- Tratamiento específico para astronomía, separando el fondo (la imagen
  residual) de los planetas y estrellas, o separando las estrellas de
  nubes de polvo,

<!-- -->

- etc.


El tamaño de los detalles incluídos en cada nivel es:



**1 (Fino)** : 2x2 píxeles

**2** : 4x4 píxeles

**3** : 8x8 píxeles

**4** : 16x16 píxeles

**5** : 32x32 píxeles

**6** : 64x64 píxeles

**7** : 128x128 píxeles

**8** : 256x256 píxeles

**9** : 512x512 píxeles

**Extra** : 1024x1024 píxeles

Supongamos que seleccionas 5 niveles de detalle: las modificaciones en
los distintos niveles se limitarán a los detalles con una escala de 32
píxeles o más pequeños.

Según este ejemplo, la imagen residual tendrá todos los detalles de la
imagen, excepto los que se hayan incluído en los niveles del 1 al 5. Y
dado que los detalles eliminados son relativamente pequeños, la imagen
residual será más o menos cercana a la imagen original.

Por el contrario, si escoges el nivel máximo (el nivel 9), podrás
cambiar los detalles con un tamaño de 512 píxeles (nivel 9) y de 1024
píxeles (nivel «Extra»). En este caso la imagen residual será bastante
diferente a la imagen original, ya que los niveles del 1 al 10
contendrán todos los detalles, por lo que lo que quedará será poco más
que un fondo emborronado.

Una vez seleccionados los niveles requeridos, no hay que olvidar que la
herramienta solo realizará modificaciones en aquellos niveles en los que
hagas cambios, aunque la imagen residual seguirá siendo lo que quede
después de eliminar todos los detalles de todos los niveles.


En los niveles a usar, tal como se ha dicho antes, el desglose por
ondículas separa la
*[luminancia](https://es.wikipedia.org/wiki/Luminancia)* y los canales
de *[cromaticidad](https://en.wikipedia.org/wiki/Chromaticity)*
<span style="font-size: 0.7em; font-style: italic;">(enlace a documento
en inglés)</span>
\[<https://es.wikipedia.org/wiki/Espacio_de_color_Lab#El_espacio_de_color_CIE_1976_L>\*,_a\*,_b\*_CIELAB)
*a\** y *b\**\] en cada nivel, además de separarlos también en la imagen
residual. Gracias a ésto en cada nivel puedes aplicar diferentes ajustes
a la luminosidad y a los tonos, mientras que al mismo tiempo puedes
realizar un procesado completamente distinto en la imagen residual.



#### La vista previa


Los efectos de esta herramienta son visibles a cualquier nivel de zoom.
Sin embargo, debido a la naturaleza del algoritmo solo la vista previa
con el zoom a tamaño real (o más ampliado) coincidirá perfectamente con
la imagen guardada: el tamaño en pantalla de la imagen tiene un impacto
directo en la nitidez percibida.


En la práctica, ésto significa que debes utilizar esta herramienta a un
nivel de zoom similar al del tamaño final deseado de la imagen (en
cuanto a distancia de visualización, tamaño de la pantalla o del papel,
etc). Por lo tanto, si deseas imprimir una imagen de alta resolución en
un soporte de 90x60 cm y después verla desde 30 cm, entonces es
razonable acercar el zoom al 100% y ajustar los controles deslizantes
del nivel "1 (Fino)".

Sin embargo, en realidad cuando se cuelgan en la pared impresiones tan
grandes se suelen observar desde una buena distancia (digamos, desde un
sofá a unos metros de la imagen) y, al no estar cerca, los ajustes
realizados en los niveles de detalle más fino no se pueden distinguir:
los ojos no pueden percibir detalles tan finos a esa distancia.


Lo mismo ocurre si vas a cambiar el tamaño de la imagen más adelante,
por ejemplo para enviarla como archivo adjunto por correo electrónico,
para subirla a un sitio web de imágenes compartidas, para plataformas
sociales, etc. No sólo se reducirá el tamaño de la imagen, sino que
puede verse en dispositivos con baja resolución, sin estar a pantalla
completa, en portátiles, tabletas o teléfonos móviles.


Ten ésto en cuenta para que no pierdas tiempo ajustando los niveles de
detalle que se perderán de todos modos. ***Por lo general, sólo los
controles deslizantes del nivel «2» y superiores proporcionan un efecto
útil.***


Por otro lado se presenta otra limitación: RawTherapee utiliza **en la
vista previa** todos los niveles que puede, ignorando aquellos niveles
cuyos detalles son más grandes que el tamaño de la imagen que se ve en
pantalla. Pero aunque las modificaciones en los niveles ignorados no se
muestren en pantalla, sí que se aplicarán a la hora de procesar la
imagen para guardarla en disco.

Dicho de otro modo: si estás procesando una imagen con un tamaño de más
de 1024x1024 píxeles y la ves al completo en la pantalla, con un zoom
aproximadamente igual al tamaño final de la imagen cuando la guardes en
disco, los cambios que hagas en cualquier nivel de detalle serán
visibles en la vista previa y el archivo que guardes en disco reflejará
lo que has visto en pantalla.


Si ocurriera que la imagen es mayor que 1024x1024 píxeles, pero solo ves
una porción menor a ese tamaño en la vista previa, los cambios en
niveles de detalle mayor a lo que ves en la vista previa no se
reflejarán en pantalla, pero sí se incluirán al procesar la imagen para
guardarla en disco. El resultado final será que la imagen guardada
tendrá un aspecto distinto a lo que viste en pantalla. Es por esto que
conviene ocultar el máximo de paneles posibles, para que la vista previa
ocupe todo lo posible de la pantalla.

Por el contrario, si la imagen fuera pequeña, los niveles más altos se
irían ignorando hasta que los detalles fueran más pequeños que el tamaño
de la imagen. Al guardarla, los niveles ignorados no tendrían efecto
alguno porque sus detalles serían más grandes que la propia imagen. Pero
si la vista previa continuara mostrando una porción de la imagen,
tendríamos el mismo problema que en el párrafo anterior.



#### Para que no haya lugar a dudas



- si la imagen es de 1024x1024 píxeles o superior y ves una porción de
  imagen mayor de 1024x1024 píxeles en la vista previa, todas las
  modificaciones las verás en pantalla tal como quedarán en el archivo
  al guardarla

<!-- -->

- si la imagen es menor a 1024x1024 píxeles, al guardar la imagen en
  disco se emplearán todos los niveles con detalles más pequeños que la
  propia imagen (en una foto de 800x600 píxeles, se utilizarán los
  cambios hasta el nivel «9» y el «Extra» se ignorará)

<!-- -->

- si vemos una parte de la imagen, en pantalla solo veremos los cambios
  con detalles más pequeños que las dimensiones que se ven en pantalla,
  pero al guardar la imagen se seguirán las normas de los dos puntos
  anteriores.

#### Ejemplos



- Ejemplo 1: la imagen es de **4096x2160** píxeles, la hemos ampliado y
  en la vista previa vemos una zona de **1500x1200** píxeles a un tamaño
  similar a la imagen final. Este es el caso ideal y en pantalla
  podremos ver todas las modificaciones que realicemos en todos los
  niveles (hasta el nivel «Extra»). Además, los cambios realizados en
  todos los niveles se incluírán en la imagen final.

<!-- -->

- Ejemplo 2: la imagen es de **4096x2160** píxeles, pero la hemos
  ampliado y en la vista previa solo vemos **300x200** píxeles, por lo
  cual en pantalla no podremos ver ninguna modificación en detalles más
  grandes que los del nivel «7» (detalles de 128 píxeles), pero al
  guardarla los cambios realizados en los niveles «8», «9» y «Extra» sí
  serán incluídos (porque la imagen es mayor que 1024x1024 píxeles).

<!-- -->

- Ejemplo 3: la imagen es de **720x480** píxeles y la hemos ampliado
  hasta que en la vista previa solo vemos **300x200** píxeles, por lo
  cual en pantalla no podremos ver ninguna modificación en detalles más
  grandes que los del nivel «7» (detalles de 128 píxeles) ***y además***
  al guardarla los cambios realizados en los niveles «9» y «Extra»
  ***NO**'' serán incluídos,***pero el nivel «8» sí se incluirá**''
  (detalles de 256 píxeles).


Como todo esto es muy importante no olvidarlo, la propia herramienta te
informa de cuántos niveles se están usando para la vista previa, debajo
del último control deslizante del grupo de «Contraste». En los ejemplos
2 y 3 anteriores veríamos: «Máximo número de niveles empleados en la
vista previa=7».



#### Contraste por Niveles de detalle vs Niveles de Ondícula


Cabe mencionar que RawTherapee tiene una herramienta llamada [Contraste
por Niveles de detalle](Contrast_by_Detail_Levels/es "wikilink") y
aunque se parece a la herramienta Niveles de Ondícula, hay varias
diferencias entre éllas:

- El Contraste por Niveles de detalle tiene menos niveles (6, en lugar
  de hasta 10),

<!-- -->

- El Contraste por Niveles de detalle solo permite ajustar la luminancia
  de cada nivel, mientras que los Niveles de Ondícula también te
  permiten ajustar la cromaticidad de cada nivel,

<!-- -->

- El Contraste por Niveles de detalle no tiene imagen residual.

Dicho ésto, nadie te impide usar ambas herramientas a la vez, aunque ten
en cuenta que el Contraste por Niveles de detalle se aplica antes en el
[circuito de revelado](Toolchain_Pipeline/es "wikilink"), así que según
la intensidad de los ajustes realizados allí, podrían verse afectados
los detalles que se presentarán en los niveles del 1 al 6: puesto que el
contraste habrá cambiado con los ajustes del Contraste por Niveles de
detalle, el análisis por Niveles de Ondícula podría desglosar los
detalles de manera diferente, con lo que los resultados serían
distintos. En todo caso, si debes utilizar las dos herramientas, es
recomendable que ajustes en primer lugar el Contraste por Niveles de
detalle y después te dediques a ajustar los Niveles de Ondícula.



## Configuración de la Ondícula

### Intensidad

Con este control deslizante regularás la intensidad global de la
herramienta.

Se trata de imaginar que se mezclan dos imágenes superpuestas: la imagen
original estará debajo y sobre élla se superpone la imagen modificada
por esta herramienta, mientras que con este control modificarás la
opacidad (la transparencia) de la imagen superior para que el resultado
final sea más suave o gradual. Así se pueden hacer ajustes más
agresivos, que luego se integrarán mejor en la imagen original mediante
la transparencia.



### Niveles de Ondícula

Este control deslizante te permite decidir en cuántos niveles de detalle
se desglosará la imagen. Podrás escoger cualquier nivel entre «4» y «9»
(el décimo nivel, que se llama «Extra», aparece automáticamente cuando
seleccionas el nivel «9»). Cuanto más alto sea el número, mayores serán
las necesidades de tiempo de procesado y memoria.



### Método de mosaico

Una lista desplegable te permite elegir entre:

- Imagen completa,

<!-- -->

- [Teselas](https://es.wikipedia.org/wiki/Teselado_regular) grandes,

<!-- -->

- Teselas pequeñas.


Siempre es preferible emplear la «imagen completa», ya que evita
problemas en la zona de transición entre teselas.

Sin embargo, si no tienes suficiente memoria RAM, o si estás procesando
imágenes muy grandes (por ejemplo, 50 Megapíxeles o más), es posible que
tengas que usar las teselas.



##### Necesidades de memoria

Ejemplos de memoria necesaria, en bytes, mostrando la imagen completa,
con 9 niveles de detalle:



1\. Pentax K10D (10.2Mpx) 3888 x 2608 (Mpx o MP significa Megapíxeles)

<!-- -->



2\. Nikon D810 (36.3Mpx) 7360 × 4912

<!-- -->

Valor de referencia

<!-- -->


Necesidades mínimas para abrir la imagen en RawTherapee, con todas las
herramientas desactivadas.

<!-- -->


`anchura*altura*12`

<!-- -->


K10D: 116MiB ([Mebibytes](https://es.wikipedia.org/wiki/Mebibyte))

<!-- -->


D810: 414MiB

<!-- -->

Cuando se usan el contraste, la cromaticidad o la protección de matiz en los niveles.

<!-- -->


`niveles*anchura*altura*3 + anchura*altura*7`

<!-- -->


K10D: 329MiB

<!-- -->


D810: 1172MiB

<!-- -->

Si además se usa «Evitar el Cambio de Color»

<!-- -->


`anchura*altura*4`

<!-- -->


K10D: 39MiB

<!-- -->


D810: 138MiB

<!-- -->

Total

<!-- -->


K10D: 483MiB

<!-- -->


D810: 1724MiB



### Comportamiento de los bordes

Rawtherapee realiza el desglose de los componentes por el método de
Daubechies (investigadora matemática belga). Este método puede tener
hasta 10 escalas de coeficiente, desde D2 (que corresponde a la
descomposición Haar) hasta D20.

El programa usa los coeficientes *D2 (bajo), D4 (estándar), D6 (estándar
plus), D10 (medio) y D14 (alto)*. Cuantos más coeficientes se usen, más
detalles distinguirá la ondícula y se producirá un ligero aumento en el
tiempo de procesamiento (muchas veces inapreciable).

No existe una relación directa entre la calidad resultante y el número
de coeficientes, dependiendo ésta de la imagen base:

- en algunos casos los mejores resultados para la detección de bordes se
  obtienen con D2
- en otros casos con D6 o D14.

Este parámetro tiene un impacto bastante alto en la «detección de
bordes» y también en la descomposición global (relación entre la imagen
residual y cada nivel).



## Vista previa


Este grupo de controles te servirán para ayudarte a entender cómo
trabajar con esta herramienta de ondículas.

Tienes cuatro listas desplegables en total, que te permiten ajustar lo
que verás en la vista previa. ***Los cambios realizados en estas listas
solo afectarán a la vista previa, no a la imagen final.***

El grupo se divide en dos listas desplegables principales (y dos más que
se activarán cuando realices ciertas selecciones en las principales):

:\* la primera sirve para escoger un fondo para la vista previa

:\* la segunda permite escoger qué niveles se verán en la vista previa



### El fondo

En la lista «Fondo:» puedes elegir entre 3 fondos posibles y el que
elijas será el que se vea detrás de todos los niveles:

:\* *Negro*

:\* *Gris*

:\* *Imagen Residual*


La elección debes hacerla según el objetivo perseguido, en particular:

:\* ¿estás tratando de ver o de no ver la imagen residual?

:\* ¿buscas resaltar los detalles de los niveles más bajos?

:\* ¿intentas usar las propiedades de una máscara de desenfoque
(«Unsharp Mask»)?


El histograma tendrá en cuenta estas opciones y te permitirá, por
ejemplo, ver los efectos de los ajustes en la imagen residual. Ten en
cuenta, sin embargo, que si eliges los fondos negro o gris, no verás la
imagen residual (el «fondo real») y puede que encuentres la imagen con
un aspecto extraño. Debes tener esto especialmente en cuenta si realizas
cambios en los niveles de detalle, ya que el efecto «real» no lo verás
hasta que vuelvas a poner como fondo la imagen residual. A pesar de
éllo, a veces es interesante ver los cambios sobre un fondo neutro para
juzgar mejor lo que está ocurriendo.



### Los niveles

Antes de empezar, conviene aclarar un concepto que puede confundirte: en
cuanto a concepto, los niveles están apilados al revés que como se
muestran en la interfaz.

Puedes imaginar que (al realizar el desglose) el primer nivel que se
extrae es el de detalle más fino (el nivel «1»), se copian esos detalles
en una hoja y se deja sobre la mesa; luego se extrae el nivel «2», se
copia en papel y se deja encima del nivel anterior; y así sucesivamente
hasta la «Imagen Residual». En definitiva, el primer nivel estaría
debajo de la pila de folios y la Imagen Residual arriba del todo.

Sin embargo, a la hora de modificarlos, la tendencia será casi siempre a
retocar primero los niveles con detalle más fino, por lo que en la
interfaz se muestran los primeros. En definitiva, en la interfaz el
primer nivel está arriba del todo, mientras que el nivel Extra es el
último, debajo del resto de niveles.


Una vez entendido ésto, en la lista «Niveles:» podrás seleccionar:

:\* *Un nivel*

:\* *Por debajo o igual que el nivel* : todos los niveles **desde** el
seleccionado hacia abajo (teniendo en cuenta que el nivel más bajo es el
nivel 1 y el más alto es la imagen residual),

:\* *Por encima del nivel* : todos los niveles **sobre** el seleccionado
(más la imagen residual)

:\* *Todos los niveles en todas direcciones*


Si seleccionas cualquiera de las tres primeras opciones, se activarán un
par de listas desplegables justo debajo de «Niveles:»:

:\* En la lista de la izquierda decidirás cuál será el nivel al que
hacen referencia las opciones anteriores (desde el nivel 1 al 9, el
nivel «Extra», o la Imagen Residual).

:\* En la lista de la derecha podrás escoger la dirección de
descomposición de la ondícula (*Vertical, Horizontal, Diagonal, Todas
las direcciones*).


En cambio, si seleccionaras la opción «Todos los niveles, en todas
direcciones», entonces editarías los niveles directamente sobre la
imagen residual (las dos listas inferiores permanecerían desactivadas).
Esta opción es útil si ya tienes experiencia con la herramienta y vas
*directo al grano.* No olvides que este grupo de controles están
dirigidosa principalmente a la pedagogía, para entender lo que implica
usar el desglose (la descomposición) por ondículas.



### Sugerencias de uso

:\* puedes seleccionar «Un nivel» con un fondo gris para apreciar cómo
ha desglosado los detalles el coeficiente de Daubechies elegido (del D2
al D14), e ir probando coeficientes diferentes para ver cual ofrece el
resultado que más ajuste la separación de detalles a lo que deseas

:\* puedes seleccionar «Un nivel» para encontrar el nivel que tenga los
detalles sobre los que quieres trabajar (como puede ser el nivel que
haya extraído las manchas de la piel, pero no su textura)

:\* puedes seleccionar «Un nivel» y ver el efecto de los cambios de
contraste en ese nivel concreto

:\* puedes seleccionar «Por encima del nivel» y «8», para ver la imagen
residual junto con los detalles más grandes y apreciar mejor la acción
de los distintos parámetros del grupo «Imagen Residual»

:\* puedes seleccionar «Por debajo o igual que el nivel», «4» y como
fondo «Imagen Residual», para ver en contexto las modificaciones en los
detalles más finos, sin que los detalles más grandes enmascaren lo que
estás haciendo.



### Ejemplo real

A continuación se muestra una imagen de ejemplo a la que se le ha
realizado un procesado mínimo. A su lado, de izquierda a derecha tenemos
los detalles de nivel 2, los detalles de nivel 4 y la imagen residual.

En los dos ejemplos de detalles, el desglose se ha realizado con un
**«Comportamiento de los bordes»** en **«D6 (estándar plus)»**, se ha
seleccionado como **«Fondo:»** el color **gris**. Además, para aislar el
detalle, en **«Niveles:»** se ha escogido **«Un nivel»**.

En cuanto a la Imagen Residual, es el resultado de eliminar todos los
detalles después de escoger **«5»** **«Niveles de ondícula»**

***Para ver las imágenes un poco más grandes, deberás hacer clic en
éllas y después seleccionar la máxima resolución disponible.***



<File:wavelet_pic.png%7CImagen> original: la flor de un Prunus pisardii
(ciruelo del Japón) al 50% del tamaño original
<File:wavelet_config_L2.png%7CDetalles> del nivel 2 sobre fondo gris:
fíjate cómo se ha capturado la textura de los pétalos en este nivel
(deberás ampliar la imagen para poder verlo bien)
<File:wavelet_config_L4.png%7CDetalles> del nivel 4 sobre fondo gris: en
este nivel se ve lo que probablemente dibujaríamos si quisiéramos hacer
un boceto de la flor <File:wavelet_config_RI.png%7CDetalles> de la
Imagen Residual: podemos ver perfectamente los tonos de base de cada
zona de la foto



## Contraste

En este grupo de controles podrás modificar el contraste de los detalles
y del fondo por separado.

### Niveles de Contraste

![](wavelet_contrast_buttons.png "wavelet_contrast_buttons.png") El
número de niveles presente viene definido por los Niveles de Ondícula y
podrás reducir o aumentar este número en la configuración de la
ondícula.

Los botones «Contraste -» y «Contraste +» facilitan la modificación
progresiva y suave de los valores de cada nivel. Las modificaciones de
cada nivel son proporcionales: más intensas en los primeros niveles y
más discreta en los últimos. Como puedes observar, la progresión es
homogénea: empezando desde el nivel «Extra», que no modifica su
contraste, en cada salto de nivel se añaden 31 unidades a cada nivel (la
cantidad concreta dependerá de las veces que hagas clic en los botones).


En general con estos botones se obtiene una progresión lógica del
[microcontraste](Edges_and_Microcontrast/es#Microcontraste "wikilink"):
mayor para los primeros niveles y menor para los últimos niveles. Sin
embargo no es raro que se deseen ajustar los niveles altos también, por
ejemplo para aumentar el contraste en los niveles inferiores, mientras
se disminuyen (con valores negativos) en los superiores.

No olvides que si un nivel es uniforme en contraste, la acción del
control deslizante de ese nivel será nula.

Fíjate que la imagen residual no está incluida en el grupo de controles
anterior porque no es un nivel: es lo que queda de la imagen original
tras quitar todos los detalles que se distribuyen en los niveles.



### Aplicar en

Este bloque de controles te permite decidir si los cambios en el
contraste de cada nivel se aplican directamente (se sube o baja el nivel
global de contraste) o solo a un rango determinado de luminancias.
Gracias a ésto podrás, por ejemplo, aumentar el contraste de los
detalles finos con luminancia alta y reducir el contraste de detalles
más grandes con luminancia baja.

En la lista desplegable decidirás dónde aplicas los cambios de
contraste:



#### Rango completo de luminancias

Aquí, cada control deslizante ejerce el mismo efecto sobre todos los
detalles, sin importar la luminancia de cada uno.



#### Sombras/Altas luces

Ahora los cambios de contraste se centran principalmente en los rangos
de las sombras y en los de las altas luces (por separado).

Tras seleccionar este modo, aparecerán varios controles para
personalizar el resultado: un par de barras en blanco y negro con curvas
ajustables y un par de controles deslizantes. A saber:

:\* **Rango (gráfico) de luminancia para las altas luces**:

::\* se trata de una pequeña área con un degradado en blanco y negro,
dónde se definen cuatro puntos que establecerán en qué luminancias será
efectivo el cambio de contraste



<div style="overflow: hidden">

<figure>
<img src="wavelet_contrast_highlight.png"
title="wavelet_contrast_highlight.png" />
<figcaption>wavelet_contrast_highlight.png</figcaption>
</figure>

</div>

:\* **Niveles de altas luces**:

::\* es un control deslizante para establecer en qué niveles se cambiará
el contraste de los detalles con alta luminancia, empezando siempre por
el «nivel 1» y hacia arriba (desde el nivel con detalle más fino, hasta
el nivel con detalle más grande)

::\* por ejemplo, si seleccionas «3», los cambios hasta el nivel 3
(incluído) sólo se harán a los detalles que tengan una luminancia dentro
del rango definido antes. El resto de detalles de los niveles 1, 2 y 3
no sufrirán modificaciónes

::\* el nivel que selecciones aquí será el límite para aplicar cambios a
los detalles en el rango de las sombras (los dos controles siguientes),
independientemente del nivel que se seleccione en los «niveles de
sombras»

:\* **Rango (gráfico) de luminancia para las sombras**

::\* se presenta otra pequeña área con un degradado en blanco y negro,
dónde se definen cuatro puntos que establecerán en qué luminancias será
efectivo el cambio de contraste, en este caso para las sombras



<div style="overflow: hidden">

<figure>
<img src="wavelet_contrast_shadow.png"
title="wavelet_contrast_shadow.png" />
<figcaption>wavelet_contrast_shadow.png</figcaption>
</figure>

</div>

:\* **Niveles de sombras**:

::\* es un control deslizante para establecer en qué niveles se cambiará
el contraste de los detalles con baja luminancia, empezando *siempre*
por el «nivel Extra» y hacia abajo (desde el nivel con detalle más
grande, hasta el nivel con detalle más fino). Se empezará siempre por el
nivel «Extra» (o «nivel 10»), incluso cuando uses menos niveles

::\* la diferencia con el control de nivel de las altas luces es que
**el número que ajustes aquí no será el nivel donde dejará de aplicarse
el ajuste para las sombras**: por ejemplo, si seleccionas un «4», los
cambios en los detalles de baja luminosidad se realizarán desde el nivel
«6» hasta el «Extra» (*el nivel Extra es el nivel 10, le restamos 4 y
resulta el nivel 6*)

::\* recuerda que el nivel inicial para las sombras siempre es el de
detalles más grandes (el Extra), incluso cuando no hayas desglosado la
imagen en todos los niveles posibles

::\* además, el nivel más bajo para el efecto de las luminancias para
las sombras nunca podrá superponerse al que hayas establecido en las
luminancias para las altas luces: si en «Niveles de altas luces» has
seleccionado «3», los «Niveles de sombras» nunca se aplicarán más allá
del nivel «4»


En los niveles no comprendidos entre los establecidos en estos dos
controles, los cambios se realizarán en el rango completo de
luminancias.



#### Casos prácticos

:\* estás usando 7 niveles y quieres que solo el nivel 7 aplique cambios
en los detalles oscuros: ajusta *«Niveles de sombras»* en *«3»*

:\* estás usando 7 niveles y aunque vas a modificar los detalles
luminosos de los primeros niveles, no quieres que el nivel 7 aplique
cambios en los detalles oscuros: ajusta *«Niveles de sombras»* en *«3»*
y el control deslizante del nivel 7 en *«0»*. Alternativamente, si
quieres realizar alguna modificación en todas las luminancias del nivel
7, ajusta *«Niveles de sombras»* en *«2»* (o incluso *«1»*)

:\* estás usando 7 niveles y quieres que los niveles 1 y 2 modifiquen
sus detalles luminosos, al mismo tiempo que los niveles 6 y 7 apliquen
cambios en los detalles oscuros: ajusta *«Niveles de altas luces»* en
*«2»* y *«Niveles de sombras»* en *«4»*



### Ejemplo real

A continuación se vuelve a mostrar la imagen de ejemplo y a su lado, de
izquierda a derecha tenemos varias posibilidades a la hora de aplicar un
aumento de contraste en todos los niveles, tras pulsar *15 veces* sobre
el botón **«Contraste +»**.

En primer lugar se muestra el efecto sobre el **«Rango completo de
luminancias»**, a su derecha el efecto si distinguimos los rangos de
altas luces y sombras (**«Sombras/Altas luces»**). Por fin, un ejemplo
de cómo se pueden matizar los cambios mediante el control
**«Intensidad»**.

Los controles no mencionados se han dejado en sus valore por defecto
(los puntos de las curvas, ...).

De nuevo, para ver las imágenes un poco más grandes, deberás hacer clic
en éllas y después seleccionar la máxima resolución disponible.



<File:wavelet_pic.png%7CImagen> original
<File:wavelet_contrast_15C+_WL.png%7CDespués> de aplicar el efecto sobre
el «Rango completo de luminancias»: es especialmente notable el
incremento de visibilidad del ruido del fondo
<File:wavelet_contrast_15C+_H3S6.png%7CDespués> de aplicar el efecto
sobre las sombras y altas luces: «Niveles de altas luces» en 3, «Niveles
de sombras» en «6»: el efecto es mejor, pero se aprecia un poco
exagerado <File:wavelet_contrast_15C+_H3S6_Str50.png%7CEl> mismo
tratamiento anterior, pero rebajando la «Intensidad» global de la
herramienta hasta «50»


Y ahora la imagen original y la final, lado a lado para apreciar mejor
las diferencias: se aprecia un aumento de nitidez de la textura de los
pétalos, sin arruinar el efecto global a este tamaño. Si bien se trata
de una reducción al 50% del tamaño original (dónde sí se aprecian
claramente artefactos y exceso de contraste), no hay que olvidar que
esta herramienta se debe usar viendo la imagen al tamaño final en el que
se visualizará (en este caso se verá en este artículo al tamaño mostrado
en pantalla cuando ves la imagen a tamaño real, es decir, *haciendo clic
en la imagen dos veces*, una en el artículo y otra en la galería).

<File:wavelet_pic.png%7CImagen> original
<File:wavelet_contrast_15C+_H3S6_Str50.png%7CContraste> modificado y el
efecto rebajado al 50%



## Cromaticidad

Este grupo funciona de manera similar al del contraste.


En la lista desplegable «Método de cromaticidad:» tienes las siguientes
opciones:

- «Rango completo de cromaticidad»: con esta opción, cualquier cambio en
  cualquier nivel afectará al rango completo de cromaticidad,
  independientemente de los valores en los niveles del grupo de
  contraste.

<!-- -->

- «Saturado/Pastel»: aquí modificarás dos rangos que actúan a la vez y
  limitan los tonos pastel y los tonos saturados, independientemente de
  los niveles del grupo de contraste.

<!-- -->

- «Enlazar con los niveles de contraste»: los cambios en cromaticidad
  estarán directamente relacionados con los que se hayan efectuado en
  cada nivel del grupo de contraste.



### Rango completo de cromaticidad

Si seleccionas esta opción, se modifica el rango completo de
cromaticidad, independientemente de lo saturado que ya esté.

La misma observación que en el contraste se aplica aquí: para que hayan
modificaciones de cromaticidad, debe preexistir una variación de
cromaticidad en el nivel: si un nivel tiene una cromaticidad uniforme,
el control deslizante no producirá ningún efecto.

Las modificaciones de cada nivel están limitadas al rango \[-100,+100\]:
el valor «-100» es el equivalente a desaturar completamente el nivel,
mientras que el valor «+100» incrementa la tonalidad de cada píxel de
detalle, pero introduciendo casi siempre artefactos, dado que se aplica
una fórmula simple a los valores de cromaticidad del píxel, sin tener en
cuenta las desviaciones del tono inicial.



<File:wavelet_contrast_15C+_H3S6.png%7CImagen> con las modificaciones de
contraste aplicadas y la intensidad global de las ondículas al 100%
<File:wavelet_chrom_WC_full.png%7CEfecto> sobre el «Rango completo de
cromaticidad» con los controles deslizantes de los 5 niveles en «+100»:
incluso en imagenes reducidas se aprecian los artefactos de color (por
otra parte lógicos pues se ha aplicado el efecto al máximo)
<File:wavelet_chrom_WC_L1L2full.png%7CDespués> de aplicar el máximo
efecto sobre los niveles «1» y «2»: a este tamaño apenas se aprecia
cambio alguno (recuerda que sólo estamos afectando a los detalles más
finos) <File:wavelet_chrom_WC_detail.png%7CÉste> es un detalle de un
estambre al 400% del tamaño original (8 veces mayor que las imágenes del
artículo): en la parte superior, con la modificación de cromaticidad
aplicada, se aprecian artefactos especialmente en los bordes de los
estambres, pero tan apenas algún cambio en la textura del pétalo


Los ejemplos anteriores vienen a decir que con esta opción deberías ser
muy sutil, ya que dependiendo del nivel y la intensidad del cambio en la
cromaticidad es bastante fácil introducir artefactos muy visibles. Sin
embargo, si eres demasiado sutil, los cambios apenas serán perceptibles.
En cualquier caso el ruido de color (en inglés: *Chroma Noise*) se verá
afectado y aumentará de forma notable.



### Saturado/Pastel

Al seleccionar esta opción, los cambios en la cromaticidad por cada
nivel se centran en los tonos saturados en unos niveles y los tonos
pastel en el resto de niveles.

Tras seleccionarlo, aparecerán varios controles para personalizar el
resultado: un control deslizante y un par de barras en blanco y negro
con curvas ajustables, tal como ocurría con el contraste.



:\* **Umbral de saturado/pastel**

::\* con este control decides en qué nivel se pasa de modificar los
tonos saturados a los tonos pastel

::\* el valor por defecto es «5», es decir, en los primeros 5 niveles se
modificarán los tonos saturados y en el resto los tonos pastel (los
niveles más altos)

::\* ten en cuenta que si este valor es superior al número de niveles
que has elegido, sólo se modificarán los tonos saturados

::\* por otro lado, si eliges «1», dado que este nivel solo tiene los
detalles más finos, en la práctica solo modificarás los tonos pastel



:\* **Rango (gráfico) de tonos pastel**:



<div style="overflow: hidden">

<figure>
<img src="wavelet_chrom_pastel.png" title="wavelet_chrom_pastel.png" />
<figcaption>wavelet_chrom_pastel.png</figcaption>
</figure>

</div>

:\* **Rango (gráfico) de tonos saturados**



<div style="overflow: hidden">

<figure>
<img src="wavelet_chrom_chrom.png" title="wavelet_chrom_chrom.png" />
<figcaption>wavelet_chrom_chrom.png</figcaption>
</figure>

</div>

Con todo, tal como ocurría al modificar el «Rango completo de
cromaticidad», los cambios son poco apreciables si no estás dispuesto a
introducir artefactos bastante visibles.



<File:wavelet_contrast_15C+_H3S6.png%7CImagen> con las modificaciones de
contraste aplicadas y la intensidad global de las ondículas al 100%
<File:wavelet_chrom_WC_L1L2full.png%7CDespués> de aplicar el máximo
efecto sobre los niveles «1» y «2»
<File:wavelet_chrom_SP_L1L2full_L3_60.png%7CAplicando> modificaciones en
tonos saturados y pastel por separado. «Umbral de saturado/pastel» en el
nivel «3». Máximo efecto en los niveles «1» y «2», mientras que se queda
en «60» en el nivel «3». El resto en «0»
<File:wavelet_contrast_15C+_H3S6.png%7CImagen> con las modificaciones de
contraste aplicadas y la intensidad global de las ondículas al 100% (de
nuevo, para comparar lado a lado con la modificación de tonos pastel y
saturados)


Como puedes ver, a pesar de aplicar los cambios al 100% en algunos
niveles, las diferencias son sutiles, incluso inapreciables si no te
fijas.



### Enlazar con los niveles de contraste

En esta opción empezamos a hablar de resultados interesantes: los
cambios en cromaticidad están directamente relacionados con los que se
hayan efectuado en cada nivel del contraste.

La proporción entre los cambios en el contraste y la cromaticidad se
regula con el control deslizante «Intensidad de la relación
Croma/Contraste»: así, «0» hará que no haya efecto alguno en la
cromaticidad, mientras que «100» proporcionará el máximo efecto. Y este
efecto máximo es más intenso que en «Rango completo de cromaticidad»
(particularidad especialmente notable en el ruido de color).


Ten en cuenta que si aplicas cambios fuertes en los contrastes, asímismo
serán en la cromaticidad y con mucha probabilidad se presentarán
artefactos indeseables: tu mejor aliado siempre será el control
«Intensidad de la relación Croma/Contraste», para conseguir efectos
claramente visibles sin que los artefactos arruinen la foto.



### Ejemplo real



<File:wavelet_chrom_Link_100.png%7CCromaticidad> ligada a los cambios en
el contraste. «Intensidad de la relación...» en «100». Imagen
absolutamente degradada por los artefactos (como era de esperar): halos
y ruido de color en el fondo <File:wavelet_chrom_Link_50.png%7CEn> este
caso la «Intensidad de la relación...» es «50». No es sutil, pero es
controlable... <File:wavelet_chrom_Link_50_Str50.png%7CLa> misma
intensidad de la foto anterior, pero con la intensidad global de las
ondículas al 50% <File:wavelet_contrast_15C+_H3S6_Str50.png%7CImagen> de
referencia con las modificaciones de contraste aplicadas y la intensidad
global de las ondículas al 50%


Como las modificaciones en la imagen original se están haciendo *a
grosso modo* para que se vean suficientemente bien los resultados, en
esta última foto (con contraste y cromaticidad aplicados) se pueden ver
bordes azulados en los pétalos, halos alrededor de las anteras de los
estambres y un fondo lleno de ruido, pero aún así, dado lo agresivas que
son las modificaciones, parece que la imagen no está tan desastrosa. En
este punto cabe resaltar la intensidad que ha tomado el tono de las
*venas* en los pétalos.



## Viraje

Este grupo realiza un viraje de los tonos, pero dirigiendo las
modificaciones a niveles concretos de detalles, según tus necesidades.

Sin embargo, la realidad es que no se puede actuar directamente y con
exactitud en el color (matiz) en cada nivel, porque los componentes a\*
y b\* se han desglosado y es muy difícil crear una relación matemática
precisa entre el matiz seleccionado y los componentes desglosados.

Aún así, en este grupo de controles se presentan dos curvas:

:\* La **«Opacidad Rojo-Verde»** (la curva a\*) actúa sobre los tonos
rojos-verdes,

:\* La **«Opacidad Azul-Amarillo»** (la curva b\*) actúa sobre los tonos
azules-amarillos.

En la interfaz encontrarás dos *tipos de curva:* «Lineal»
(![](wavelet_toning_linear.png "wavelet_toning_linear.png")) y
«Ecualizada» (![](wavelet_toning_curve.png "wavelet_toning_curve.png")).
Para elegir entre una u otra, deberás desplegar la lista con el pequeño
triángulo de la derecha.

A día de hoy, la curva *lineal* es un misterio, puesto que no permite
ajustar nada y parece no tener efecto sobre la imagen, así que en lo que
sigue será ignorada.

En cada curva *ecualizada* tenemos un eje horizontal (o eje «x») y un
eje vertical (o eje «y»):

:\* el eje «x», representa el número total de niveles posibles: 10
niveles, ordenados de izquierda a derecha y repartidos uniformemente

:\* el eje «y» representa la intensidad de la modificación: cuando la
curva sube por encima o baja por debajo de la línea media la
cromaticidad se modifica hacia un extremo u otro del eje del componente
que se esté modificando (a\* o b\*). Desde un punto de vista práctico:
el tono puede incrementar su saturación o sufrir una desaturación *hasta
cierto punto* antes de cambiar su matiz. Para visualizar mejor el
efecto, échale un vistazo a esta [vista desde arriba del espacio de
color
L\*a\*b\*](https://upload.wikimedia.org/wikipedia/commons/0/06/CIELAB_color_space_top_view.png),
con «b\*» como eje vertical y «a\*» como eje horizontal.

Por defecto, la curva es plana y se sitúa sobre la línea media. Para
hacerte una idea de cómo puedes interactuar con la curva, repasa las
explicaciones de las [Curvas
Tonales](Exposure/es#Curvas_Tonales "wikilink"). Y recuerda que si al
final no te gustan las modificaciones que has realizado en la curva,
siempre puedes volver a empezar haciendo clic en la flecha de reinicio
de la herramienta
![<File:ResetButton.png>](ResetButton.png "File:ResetButton.png").

Siempre que existan previamente variaciones de la cromaticidad en la
imagen original, con estas curvas tienes la posibilidad de variar de
forma diferenciada el tono de los detalles deseados, según dónde
coloques los puntos en la curva y la amplitud que tenga la modificación
(es decir, a cuántos niveles afecta). Sin embargo, cabe decir que se
hará todo *a ojo,* puesto que no hay referencia de los niveles en el eje
«x» y será más probable que sepas lo que estás modificando mientras
miras en la vista previa que directamente en la curva.

Si utilizas menos de 10 niveles, los puntos que afecten a los niveles
que queden más a la derecha de los que utilices, simplemente se
ignorarán: si estás modificando la imagen con 4 niveles, los 6 de más a
la derecha (los de detalles de mayor tamaño) se ignorarán.



### Ejemplo real


Recordemos que teníamos unos feos halos azules alrededor de algunas
zonas de la flor, así que intentaremos eliminarlos (o al menos
disimularlos) con el viraje:



<table>
<tbody>
<tr class="odd">
<td style="padding:0px 20px 0px 0px;"><figure>
<img src="wavelet_chrom_Link_50_Str50.png"
title="wavelet_chrom_Link_50_Str50.png" />
<figcaption>wavelet_chrom_Link_50_Str50.png</figcaption>
</figure></td>
<td style="padding:0px 20px 0px 0px;"><figure>
<img src="wavelet_toning_opBYfull.png"
title="wavelet_toning_opBYfull.png" />
<figcaption>wavelet_toning_opBYfull.png</figcaption>
</figure></td>
<td style="padding:0px;"><figure>
<img src="wavelet_toning_opBYfull_curve.png"
title="wavelet_toning_opBYfull_curve.png" />
<figcaption>wavelet_toning_opBYfull_curve.png</figcaption>
</figure></td>
</tr>
<tr class="even">
<td style="padding:10px 20px 0px 0px; width:396px;"><p>La imagen tal
como quedó después de los cambios en cromaticidad, con la intensidad
global al 50%</p></td>
<td style="padding:10px 20px 0px 0px; width:396px;"><p>Al aplicar un
cambio de tono al máximo en la curva «Azul-Amarillo»: fíjate cómo se han
generado halos amarillos donde antes eran azules</p></td>
<td style="padding:10px 0px 0px 0px; width:268px;"><p>La curva aplicada,
que afecta principalmente a los niveles 3 y 4 y en menos medida al
5</p></td>
</tr>
<tr class="odd">
<td><p> </p></td>
<td><p> </p></td>
<td></td>
</tr>
<tr class="even">
<td style="padding:0px 20px 0px 0px;"><figure>
<img src="wavelet_toning_opBY.png" title="wavelet_toning_opBY.png" />
<figcaption>wavelet_toning_opBY.png</figcaption>
</figure></td>
<td style="padding:0px 20px 0px 0px;"><figure>
<img src="wavelet_toning_opBY_Str50.png"
title="wavelet_toning_opBY_Str50.png" />
<figcaption>wavelet_toning_opBY_Str50.png</figcaption>
</figure></td>
<td style="padding:0px;"><figure>
<img src="wavelet_toning_opBY_curve.png"
title="wavelet_toning_opBY_curve.png" />
<figcaption>wavelet_toning_opBY_curve.png</figcaption>
</figure></td>
</tr>
<tr class="odd">
<td style="padding:10px 20px 0px 0px; width:396px;"><p>Un cambio de tono
en la curva «Azul-Amarillo», pero con una intensidad moderada, buscando
eliminar en lo posible los halos azules</p></td>
<td style="padding:10px 20px 0px 0px; width:396px;"><p>El mismo cambio
que en la foto anterior, pero con la intensidad global de las ondículas
al 50%</p></td>
<td style="padding:10px 0px 0px 0px; width:268px;"><p>La curva aplicada,
que afecta más o menos a los mismos niveles que antes, pero con menor
intensidad</p></td>
</tr>
</tbody>
</table>


Al final siguen quedando algunos restos de halos azules, pero más
disimulados.



## Reducción de Ruido y Refinado/Pulido

Estos 4 controles deslizantes dobles, vienen a completar la «Reducción
de Ruido (general)» y la «Nitidez de Bordes (de esta herramienta)».

Así pues, ¿por qué añadir un tratamiento de reducción de ruido mediante
niveles de ondícula?:

:\* tradicionalmente la reducción de ruido se realiza al principio del
procesado, para evitar que las diferentes herramientas lo realcen a
niveles inasumibles (es decir, para mantener el ruido en niveles
*soportables* ). En cambio, en esta herramienta la reducción de ruido se
encuentra al final del procesado, por lo que te ayuda a eliminar el
ruido generado por las demás herramientas (Exposición, Curvas, Gama,
...)

:\* la reducción de ruido *estándar* tiene efecto sobre toda la imagen,
mientras que con los niveles de ondícula podrás actuar de forma separada
e independiente sobre cada uno de los 4 primeros niveles